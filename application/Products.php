<?phpnamespace app\index\controller;use think\Db;use app\common\controller\Frontend;use app\index\model\Article;class Products extends Frontend{    public function index(){//产品1        return $this->fetch();    }    public function products_detail(){//产品详情页        $id=input('id');//这是二级导航id        $fid=input('fid');//这是三级导航id        if($fid){            print_r($id);            $colour_nav= Db::name('xshop_category')->where(array('parent_id'=>$id))->order('sort desc')->select();//第三级颜色分类            $this->assign('colour_nav', $colour_nav);            $product=DB::name('xshop_product')->where('category_id',$fid)->find();//当前颜色产品            $this->assign('product', $product);            $product_images=explode(',',$product['images']);//产品图册            $this->assign('product_images', $product_images);            $product_sku=DB::name(' xshop_product_sku')->where('product_id',$product['id'])->select();//产品规格            $this->assign('product_sku', $product_sku);            $product_banner=DB::name('xshop_product_banner')->where(array('pid'=>$product['id'],'on_sale'=>'1'))->order('sort asc')->select();//当前颜色产品的banner            $this->assign('product_banner', $product_banner);            $product_case=DB::name('xshop_product_info')->where(array('pid'=>$product['id'],'on_sale'=>'1'))->order('sort asc')->select();//当前颜色产品的案例            $this->assign('product_case', $product_case);            $product_article_info=DB::name('xshop_product_article')->where(array('pid'=>$product['id'],'status'=>'1'))->order('sort asc')->select();//产品文章            $this->assign('product_article_info', $product_article_info);            $product_matching=DB::name('xshop_product_matching')->where(array('pid'=>$product['id'],'status'=>'1'))->order('sort asc')->select();//产品配件            $this->assign('product_matching', $product_matching);            $this->assign('id', $id);            $this->assign('fid', $fid);        }else{            print_r($id);            $colour_nav= Db::name('xshop_category')->where(array('parent_id'=>$id))->order('sort desc')->select();//第三级颜色分类            $this->assign('colour_nav', $colour_nav);            $product=DB::name('xshop_product')->where('category_id',$colour_nav[0]['id'])->find();//当前颜色产品            $this->assign('product', $product);            $product_images=explode(',',$product['images']);//产品图册            $this->assign('product_images', $product_images);            $product_sku=DB::name('xshop_product_sku')->where('product_id',$product['id'])->find();//产品规格            $this->assign('product_sku', $product_sku);            $product_banner=DB::name('xshop_product_banner')->where(array('pid'=>$product['id'],'on_sale'=>'1'))->order('sort asc')->select();//当前颜色产品的banner            $this->assign('product_banner', $product_banner);            $product_case=DB::name('xshop_product_info')->where(array('pid'=>$product['id'],'on_sale'=>'1'))->order('sort asc')->select();//当前颜色产品的案例            $this->assign('product_case', $product_case);            $product_article_info=DB::name('xshop_product_article')->where(array('pid'=>$product['id'],'status'=>'1'))->order('sort asc')->select();//产品文章            $this->assign('product_article_info', $product_article_info);            $product_matching=DB::name('xshop_product_matching')->where(array('pid'=>$product['id'],'status'=>'1'))->order('sort asc')->select();//产品配件            $this->assign('product_matching', $product_matching);            $this->assign('id', $id);            $this->assign('fid', $fid);        }        return $this->fetch();    }}